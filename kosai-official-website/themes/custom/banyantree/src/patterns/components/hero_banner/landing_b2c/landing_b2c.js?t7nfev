(function ($) {
  "use strict";

  $(function () {
    let originalElements = $('.hero-banner-b2c .field--name-field-image');
    let originalMobileElements = $('.hero-banner-b2c .field--name-field-image-mobile');
    if (originalElements.length > 0) {
      if (originalMobileElements.length > 0) {
        Array.prototype.push.apply(originalElements, originalMobileElements);
      }

      for (const element of originalElements) {
        $(element).css('--custom-opacity-header', 0);
        $(element).css('--custom-opacity-bottom', 0);
      }
    }

    let videos = $('.hero-banner-b2c .field--name-field-video');
    if (videos.length > 0) {
      for (const video of videos) {
        $(video).css('--custom-opacity-header', 0);
        $(video).css('--custom-opacity-bottom', 0);
      }
    }

    let elements = $('.hero-banner-b2c .has-opacity.opacity-part');
    if (elements.length > 0) {
      for (const element of elements) {
        let images = $(element).find('.field--name-field-image');
        let mobileImages = $(element).find('.field--name-field-image-mobile');

        if (images.length > 0) {
          if (mobileImages.length > 0) {
            Array.prototype.push.apply(images, mobileImages);
          }

          for (const image of images) {
            $(image).css('--custom-opacity-header', 0);
            $(image).css('--custom-opacity-bottom', 0);
            let opacityHeader = $(element).data('opacity-header') || 0;
            let opacityBottom = $(element).data('opacity-bottom') || 0;
            opacityHeader = opacityHeader / 100;
            opacityBottom = opacityBottom / 100;
            $(image).css('--custom-opacity-header', opacityHeader);
            $(image).css('--custom-opacity-bottom', opacityBottom);
          }
        }

        let videos = $(element).find('.field--name-field-video');
        if (videos.length > 0) {
          for (const video of videos) {
            $(video).css('--custom-opacity-header', 0);
            $(video).css('--custom-opacity-bottom', 0);
            let opacityHeader = $(element).data('opacity-header') || 0;
            let opacityBottom = $(element).data('opacity-bottom') || 0;
            opacityHeader = opacityHeader / 100;
            opacityBottom = opacityBottom / 100;
            $(video).css('--custom-opacity-header', opacityHeader);
            $(video).css('--custom-opacity-bottom', opacityBottom);
          }
        }
      }
    }

    let fullElements = $('.hero-banner-b2c .has-opacity.opacity-full');
    if (fullElements.length > 0) {
      for (const element of fullElements) {
        let slides = [];
        let images = $(element).find('.wrapper-images-sliders');
        let videos = $(element).find('.wrapper-video');

        if (images.length > 0) {
          Array.prototype.push.apply(slides, images);
        }

        if (videos.length > 0) {
          Array.prototype.push.apply(slides, videos);
        }

        if (slides.length > 0) {
          for (const slide of slides) {
            let opacity = $(element).data('opacity-bottom') || 0;
            opacity = opacity / 100;
            $(slide).append('<div class="custom-opacity" style="background: #000000 0% 0% no-repeat padding-box; --custom-opacity-height: 100%; --custom-opacity-height-mobile: 100%; z-index: 1; --custom-opacity-number: ' + opacity + ';"></div>');
            $(slide).find('.wrapper-caption').css('z-index', 99);
          }
        }
      }
    }

    var componentClass = '.hero-banner-b2c';
    var $playButton = $(`${componentClass} .wrapper-play-video`);

    $playButton.on('click', function () {
      $(this).parent().parent().find('.field--name-field-video').addClass('show');
      $(this).parent().parent().find('.desktop-image').addClass('fading');
      $(this).parent().parent().find('.mobile-image').addClass('fading');
      $(this).parent().addClass('fading');
      $(this).parent().parent().find('.field--name-field-video').css('--custom-opacity-header', 0);
      $(this).parent().parent().find('.field--name-field-video').css('--custom-opacity-bottom', 0);
      $(this).parent().parent().find('.desktop-video').css('opacity', 1);
      $(this).parent().parent().find('.mobile-video').css('opacity', 1);
      $(this).parent().parent().find('.field--name-field-video video').addClass('show');
      $(this).parent().parent().find('.field--name-field-video video').trigger('play');
    });

    // Fix bug autoplay for iOS
    let videoElements = $(`${componentClass} video[autoplay="autoplay"]`);
    videoElements.attr('playsinline', '');

  });
})(jQuery);
